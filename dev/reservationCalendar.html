<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <!-- <link rel="stylesheet" href="css/style.css" /> -->
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./css/calendar.css" />

    <title>pos 機</title>
  </head>

  <body>
    <!-- 複製以下功能列 -->
  @@include('./app/header.html', {
  "nav1" : "actives"
  })
    <!-- 複製以上功能列 -->
    <!-- 以下為各分頁內容 -->
    <div class="c-wrapper">
      <div class="tablehead">
        <h1>訂位資料管理</h1>
      </div>
      <div class="topFunc">
        <a href="./reservationCalendar.html" class="topTablink" style="text-decoration: none;">
          <div class="topTab" id="topTabactives">
            <div class="toptabCaption">訂位<br />管理</div>
          </div>
        </a>
        <a href="./reservationRecord.html" class="topTablink" style="text-decoration: none;">
          <div class="topTab">
            <div class="toptabCaption">預約<br />記錄</div>
          </div>
        </a>
      </div>  

      <div id="calendarLeftAndRight">
    <div id="calendarAll">
        <div class="calendarHeader">
            <button class="calendarTopBtn" calendarToggle="previous"> < </button>

            <div class="calendarHeaderTop" calendarLabel="month"></div>

            <button class="calendarTopBtn" calendarToggle="next"> > </button>
        </div>
        <div class="calendarWeek">
            <span>一</span>
            <span>二</span>
            <span>三</span>
            <span>四</span>
            <span>五</span>
            <span>六</span>
            <span>日</span>
        </div>
        <div class="calendarDay" calendarArea="month"></div>
    </div>
    <div class="calendarRight">
      <div>
        <form action="../dev/js/calendarDailyUpdate.php" id="calendarResTable" enctype="multipart/form-data" method="POST" target="stayhere">
          日期：<input  calendarLabel="picked" type="text" class="calendarInputText" required="required"  id="calendarPickDate" name="calendarPickDate">
          <br>
          姓名：<input type="text" class="calendarInputText" required="required" id="resFormName" name="resFormName">
          <br>
          手機：<input type="text" class="calendarInputText" required="required" id="resFormPhone" name="resFormPhone">
          <br>
          性別： <input type="radio" name="sex" id="sex1" required="required">
                <label for="sex1" >男</label>
                
                <input type="radio" name="sex" id="sex2" required="required">
                <label for="sex2" >女</label>
          <br>
          人數：<input type="text" class="calendarInputText" required="required" id="resFormPeopleCount" name="resFormPeopleCount">
          <br>
          備註：<input type="text" class="calendarInputText" name="resFormTextArea">
          <br>
          <input type="submit" class="calendarInputSubmit" value="確定預約" id="resFormSubmit"> 
        </form>
 
      </div>
    </div>
  </div>
    <p class="result">
        <!-- Date picked : 
        <span calendarLabel="picked"></span>
        <br> -->
        剩餘可預約人數 : 
        <span calendarResAble="respeople"></span>
    </p>
  </div>
    
<!-- <script src="calendar.js" type="text/javascript"></script> -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="../dev/js/calendar.js"></script>

  <script type='text/javascript'> 

    window.addEventListener('load', function () {

        //撈資料
        // Calendar.getCalendarData()
        // console.log(Calendar.DAILY_RES)


              // var calendarDataFromPHP = []
      let xhr = new XMLHttpRequest();
      
      xhr.onload = function (){
        if(xhr.status == 200){
          Calendar.DAILY_RES = JSON.parse(xhr.responseText);
                // console.log(Calendar.DAILY_RES)
        }
                //初始化日曆  
                Calendar.init({
            disablePastDays: true
        });

       //正規表達
        Calendar.matchcalendarInfo()
      }
      xhr.open("get", "../dev/js/calendarData.php", true);
      xhr.send(null);


    })
  </script>


  </body>
</html>


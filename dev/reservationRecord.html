<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <!-- <link rel="stylesheet" href="css/style.css" /> -->
  <link rel="stylesheet" href="./css/style.css" />
  <link rel="stylesheet" href="./css/reservationRecord.css">
  <title> 預約紀錄</title>
</head>

<body>
  <!-- 複製以下功能列 -->
  @@include('./app/header.html', {
  "nav1" : "actives"
  })
  <!-- 複製以上功能列 -->
  <!-- 以下為各分頁內容 -->
  <div class="c-wrapper">
    <div class="tablehead">
      <h1>歷史預約查詢</h1>
    </div>
    <div class="topFunc">
      <a href="./reservationCalendar.html" class="topTablink" style="text-decoration: none;">
        <div class="topTab">
          <div class="toptabCaption">訂位<br />管理</div>
        </div>
      </a>

      <a href="./reservationRecord.html" class="topTablink" style="text-decoration: none;">
        <div class="topTab" id="topTabactives">
          <div class="toptabCaption">預約<br />記錄</div>
        </div>
      </a>
    </div>

              <form action="reservation.php" id="myForm">
                <div class="resScrollbar" id="resScrollstyle">
                  <div class="resOverflow"></div>
                    <table id="resTable">
                      

                        <tr>
                          <td>姓名</td>
                          <td>性別</td>
                          <td>手機</td>
                          <td>人數</td>
                          <td>日期</td>
                          <td>備註</td>
                        </tr>

                      
                    </table>
                  </div>
                </div>
              </form>
            </div>

<script type="text/javascript">
window.addEventListener('load', function () {

let xhr = new XMLHttpRequest();
      
xhr.onload = function (){
  if(xhr.status == 200){
    var resAllData = JSON.parse(xhr.responseText);
    var resTable = document.querySelector('#resTable');
    var len  = resAllData.length;
    var str= "";

    for (i = 0; i < len; i++) {
        var content = ` <tr>
                          <td>${resAllData[i].CUS_FIRST}${resAllData[i].CUS_LAST}</td>
                          <td>${resAllData[i].CUS_GEN}</td>
                          <td>${resAllData[i].CUS_PHONE}</td>
                          <td>${resAllData[i].RES_NUM}</td>
                          <td>${resAllData[i].RES_DATE}</td>
                          <td>${resAllData[i].RES_NOTE}</td>
                        </tr> `
        
        console.log(content);
				str+=content;
        };
        
			  resTable.innerHTML += str;
  }

}
xhr.open("get", "../dev/js/reservationRecord.php", true);
xhr.send(null);

    })


  // function $id(id) {
  //   return document.getElementById(id);
  // }

  // function addSpot() {
  //   let myForm = $id("myForm");
  //   let resTable = $id("resTable");
  //   let btnSend = $id("btnSend");
  //   let spot = document.querySelector(".spot");
  //   // let resTablehead = document.getElementById("resTablehead");
  //   let newSpot = spot.cloneNode(true);
  //   // resTablehead.appendChild(newSpot);
  //   // newSpot.style.display=""; 
  //   newSpot.getElementsByTagName("img")[0].onclick = removeSpot; //加入JS行為

  //   // myForm.insertBefore(newSpot, btnSend);
  //   resTable.appendChild(newSpot);
  // }

  // function removeSpot(e) {
  //   let resTable = $id("resTable");
  //   resTable.removeChild(e.target.parentNode.parentNode);
  // }

  // window.addEventListener("load", function () {
  //   $id("btnAddSpot").onclick = addSpot;
  // })
</script>
</body>

</html>
